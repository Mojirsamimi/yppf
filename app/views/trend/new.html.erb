<p id="notice"><%= notice %></p>

<head>
  <script src="http://code.highcharts.com/highcharts.js"></script>
</head>


<center><h1>Spending Trends over <%=Date.today.year%></h1></center>

<div class="row vertical-align">
  <div class="col-md-5">
    <div class = "panel panel-default">
      <div class = "panel-body">
        <h4>Top 3 Expenses for <%=Date.today.year %> are:</h4>

        <div class = "row">
          <%key = @x.keys[0]%>
          <%value = @x.values[0]%>
          <div class = "well vertical-align">
            <div class = "col-md-3">
              <b><%=key.to_s%></b>
            </div>
            <div class = "col-md-3">
              $<%= value.to_f %>/year
            </div>
            <div class = "col-md-6">
              <%=((value.to_f/@total)*100).round(2)%>% of all spending
            </div>
          </div>
        </div>
        <div class = "row">
          <%key = @x.keys[1]%>
          <%value = @x.values[1]%>
          <div class = "well vertical-align">
            <div class = "col-md-3">
              <b><%=key.to_s%></b>
            </div>
            <div class = "col-md-3">
              $<%= value.to_f %>/year
            </div>
            <div class = "col-md-6">
              <%=((value.to_f/@total)*100).round(2)%>% of all spending
            </div>
          </div>
        </div>
        <div class = "row">
          <%key = @x.keys[2]%>
          <%value = @x.values[2]%>
          <div class = "well vertical-align">
            <div class = "col-md-3">
              <b><%=key.to_s%></b>
            </div>
            <div class = "col-md-3">
              $<%= value.to_f %>/year
            </div>
            <div class = "col-md-6">
              <%=((value.to_f/@total)*100).round(2)%>% of all spending
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-7">
    <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
  </div>

</div>

<button onclick="goBack()">Back</button>

<script>
function goBack(){
  window.history.back();
}
</script>
<!-- Trend chart for overall spending -->
<script>
$(function () {
    var testdata = [[Date.UTC(2012, 2, 6, 10), 5], [Date.UTC(2012, 2, 6, 11), 6], [Date.UTC(2012, 2, 6, 12), 4]]
    $('#container').highcharts({
        chart: {
            zoomType: 'x'
        },
        title: {
            text: 'USD to EUR exchange rate over time'
        },
        subtitle: {
            text: document.ontouchstart === undefined ?
                    'Click and drag in the plot area to zoom in' : 'Pinch the chart to zoom in'
        },
        xAxis: {
            type: 'datetime'
        },
        yAxis: {
            title: {
                text: 'Exchange rate'
            }
        },
        legend: {
            enabled: false
        },
        plotOptions: {
            area: {
                fillColor: {
                    linearGradient: {
                        x1: 0,
                        y1: 0,
                        x2: 0,
                        y2: 1
                    },
                    stops: [
                        [0, Highcharts.getOptions().colors[0]],
                        [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                    ]
                },
                marker: {
                    radius: 2
                },
                lineWidth: 1,
                states: {
                    hover: {
                        lineWidth: 1
                    }
                },
                threshold: null
            }
        },

        series: [{
            type: 'area',
            name: 'USD to EUR',
            data: testdata
        }]
    });
});
</script>
